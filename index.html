<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WalletWars - Solana's Ultimate Winrate Battleground</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* Base Styles from shared.css */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Animated Background */
        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(45deg, #0a0a0a, #1a1a2e, #16213e, #0f0f23);
            background-size: 400% 400%;
            animation: gradientShift 25s ease infinite;
        }

        .geometric-patterns {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.08;
            background-image: 
                radial-gradient(circle at 25% 25%, #8b5cf6 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, #06b6d4 0%, transparent 50%),
                radial-gradient(circle at 75% 25%, #ec4899 0%, transparent 50%),
                radial-gradient(circle at 25% 75%, #10b981 0%, transparent 50%);
            animation: patternFloat 35s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes patternFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(60deg); }
            66% { transform: translateY(5px) rotate(120deg); }
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            padding: 1rem 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #e879f9, #c084fc, #a855f7, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: #d1d5db;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #8b5cf6;
            background: rgba(139, 92, 246, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin-left: 1rem;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }

        /* Connected State Navigation */
        .nav-champion-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 0.75rem;
            padding: 0.5rem 1rem;
            margin-left: 1rem;
        }

        .nav-champion-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .nav-champion-name {
            color: #8b5cf6;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .nav-disconnect {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-disconnect:hover {
            background: rgba(239, 68, 68, 0.2);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 8rem 2rem 4rem;
        }

        .hero-content {
            max-width: 1000px;
            width: 100%;
        }

        .hero-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(3rem, 8vw, 8rem);
            font-weight: 900;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #c084fc 0%, #a855f7 25%, #7c3aed 50%, #6366f1 75%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
            text-shadow: 0 0 40px rgba(168, 85, 247, 0.3);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 0 40px rgba(168, 85, 247, 0.3); }
            100% { text-shadow: 0 0 60px rgba(168, 85, 247, 0.5), 0 0 80px rgba(59, 130, 246, 0.3); }
        }

        .hero-motto {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            color: #d1d5db;
            margin-bottom: 3rem;
            font-weight: 300;
        }

        .cta-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 4rem;
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid #8b5cf6;
            color: #8b5cf6;
            padding: 1.2rem 3rem;
            border-radius: 0.75rem;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-secondary:hover {
            background: rgba(139, 92, 246, 0.1);
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(139, 92, 246, 0.2);
        }

        .btn-hero-primary {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border: none;
            color: white;
            padding: 1.2rem 3rem;
            border-radius: 0.75rem;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-hero-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(139, 92, 246, 0.4);
        }

        /* Connected State Hero Styling */
        .champion-welcome-simple {
            margin-bottom: 3rem;
        }

        .welcome-champion {
            font-size: clamp(1.4rem, 4vw, 2rem);
            color: #d1d5db;
            margin: 0;
            font-weight: 400;
        }

        .champion-name-highlight {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
        }

        /* Wallet Connection Modal */
        .wallet-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .wallet-modal.active {
            display: flex;
            opacity: 1;
        }

        .wallet-modal-content {
            background: rgba(31, 41, 55, 0.95);
            backdrop-filter: blur(30px);
            border: 2px solid rgba(139, 92, 246, 0.4);
            border-radius: 1.5rem;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.8);
            transition: transform 0.4s ease;
        }

        .wallet-modal.active .wallet-modal-content {
            transform: scale(1);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(139, 92, 246, 0.2);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: -1rem;
            right: -1rem;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }

        .modal-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            color: #8b5cf6;
            margin-bottom: 0.5rem;
        }

        .modal-subtitle {
            color: #d1d5db;
            font-size: 1rem;
        }

        /* Step Indicators */
        .step-indicators {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .step-indicator {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(31, 41, 55, 0.8);
            border: 2px solid rgba(139, 92, 246, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #9ca3af;
            transition: all 0.3s ease;
        }

        .step-indicator.active {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-color: #8b5cf6;
            color: white;
        }

        .step-indicator.completed {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
            color: #10b981;
        }

        /* Step Content */
        .step-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .step-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Wallet Selection */
        .wallet-options {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .wallet-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid rgba(139, 92, 246, 0.2);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .wallet-option:hover {
            border-color: #8b5cf6;
            background: rgba(139, 92, 246, 0.1);
            transform: translateY(-2px);
        }

        .wallet-icon {
            width: 48px;
            height: 48px;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
        }

        .wallet-info {
            flex: 1;
        }

        .wallet-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.25rem;
        }

        .wallet-description {
            font-size: 0.85rem;
            color: #9ca3af;
        }

        .wallet-status {
            font-size: 0.8rem;
            color: #10b981;
            font-weight: 500;
        }

        /* Security Info */
        .security-info {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.2);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .security-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #06b6d4;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .security-text {
            color: #d1d5db;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        /* Champion Creation */
        .champion-creator {
            display: grid;
            gap: 1.5rem;
        }

        .form-group {
            display: grid;
            gap: 0.75rem;
        }

        .form-label {
            color: #8b5cf6;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input {
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #8b5cf6;
            background: rgba(15, 23, 42, 0.8);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .form-input::placeholder {
            color: #6b7280;
        }

        /* Avatar Selection */
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
        }

        .avatar-option {
            aspect-ratio: 1;
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid rgba(139, 92, 246, 0.2);
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .avatar-option:hover {
            border-color: #8b5cf6;
            background: rgba(139, 92, 246, 0.1);
            transform: scale(1.05);
        }

        .avatar-option.selected {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-color: #8b5cf6;
            transform: scale(1.1);
        }

        /* Champion Preview */
        .champion-preview {
            background: rgba(15, 23, 42, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
        }

        .preview-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin: 0 auto 0.75rem;
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        .preview-name {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: #8b5cf6;
            margin-bottom: 0.25rem;
        }

        .preview-subtitle {
            color: #9ca3af;
            font-size: 0.85rem;
        }

        /* Educational Content */
        .education-section {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .education-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #fbbf24;
            font-weight: 600;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .education-content {
            color: #d1d5db;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .education-list {
            margin: 0.5rem 0;
            padding-left: 1rem;
        }

        .education-list li {
            margin-bottom: 0.25rem;
        }

        /* Agreement Checkbox */
        .agreement-section {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .checkbox-wrapper {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }

        .checkbox-custom {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(239, 68, 68, 0.5);
            border-radius: 0.25rem;
            background: transparent;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 0.1rem;
            transition: all 0.3s ease;
        }

        .checkbox-custom.checked {
            background: #ef4444;
            border-color: #ef4444;
        }

        .checkbox-custom.checked::after {
            content: '✓';
            color: white;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .checkbox-label {
            color: #d1d5db;
            font-size: 0.85rem;
            line-height: 1.4;
            cursor: pointer;
        }

        /* Action Buttons */
        .modal-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        .btn-modal-primary {
            flex: 1;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-modal-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }

        .btn-modal-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-modal-secondary {
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #d1d5db;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }

        .btn-modal-secondary:hover {
            background: rgba(139, 92, 246, 0.1);
            border-color: #8b5cf6;
            color: #8b5cf6;
        }

        /* Loading State */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Success Celebration */
        .success-celebration {
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #10b981, #34d399);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin: 0 auto 1.5rem;
            animation: successPulse 2s ease-in-out infinite alternate;
        }

        @keyframes successPulse {
            0% { transform: scale(1); box-shadow: 0 0 20px rgba(16, 185, 129, 0.3); }
            100% { transform: scale(1.05); box-shadow: 0 0 30px rgba(16, 185, 129, 0.5); }
        }

        .success-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 0.5rem;
        }

        .success-message {
            color: #d1d5db;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }

        .achievement-unlock {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .achievement-icon {
            font-size: 1.5rem;
        }

        .achievement-text {
            color: #fbbf24;
            font-weight: 600;
        }

        /* Mobile Navigation */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .hamburger {
            width: 24px;
            height: 20px;
            position: relative;
            transform: rotate(0deg);
            transition: 0.3s ease-in-out;
        }

        .hamburger span {
            display: block;
            position: absolute;
            height: 3px;
            width: 100%;
            background: #8b5cf6;
            border-radius: 3px;
            opacity: 1;
            left: 0;
            transform: rotate(0deg);
            transition: 0.25s ease-in-out;
        }

        .hamburger span:nth-child(1) {
            top: 0px;
        }

        .hamburger span:nth-child(2) {
            top: 8px;
        }

        .hamburger span:nth-child(3) {
            top: 16px;
        }

        .hamburger.active span:nth-child(1) {
            top: 8px;
            transform: rotate(135deg);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
            left: -60px;
        }

        .hamburger.active span:nth-child(3) {
            top: 8px;
            transform: rotate(-135deg);
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .nav-links {
                position: fixed;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100vh;
                background: rgba(10, 10, 10, 0.95);
                backdrop-filter: blur(20px);
                flex-direction: column;
                justify-content: center;
                align-items: center;
                gap: 2rem;
                transition: left 0.3s ease;
                z-index: 1000;
            }

            .nav-links.active {
                left: 0;
            }

            .nav-links a {
                font-size: 1.2rem;
                padding: 1rem 2rem;
            }

            .nav-champion-info {
                margin-left: 0;
                margin-top: 1rem;
            }
        }

        /* Learn More Section */
        .learn-more-section {
            padding: 6rem 2rem;
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(10px);
        }

        .learn-more-container {
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
        }

        .learn-more-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #e879f9, #a855f7, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .learn-more-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            margin-top: 3rem;
        }

        .concept-card {
            background: rgba(31, 41, 55, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 1rem;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .concept-card:hover {
            transform: translateY(-5px);
            border-color: #8b5cf6;
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.2);
        }

        .concept-icon {
            width: 4rem;
            height: 4rem;
            margin: 0 auto 1.5rem;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .concept-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #8b5cf6;
        }

        .concept-description {
            color: #d1d5db;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-background"></div>
    <div class="geometric-patterns"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">WalletWars</a>
            
            <ul class="nav-links">
                <li><a href="index.html" class="active">Home</a></li>
                <li><a href="tournaments.html">Tournaments</a></li>
                <li><a href="leaderboards.html">Leaderboards</a></li>
                <li><a href="hall-of-fame.html">Hall of Fame</a></li>
                
                <!-- Disconnected State -->
                <li id="connectWalletBtn"><a href="#" class="btn-primary" onclick="openWalletModal()">Connect Wallet</a></li>
                
                <!-- Connected State (Hidden by default) -->
                <li id="championInfo" class="nav-champion-info" style="display: none;">
                    <div class="nav-champion-avatar" id="navChampionAvatar">🔥</div>
                    <span class="nav-champion-name" id="navChampionName">Champion</span>
                    <button class="nav-disconnect" onclick="disconnectWallet()">Disconnect</button>
                </li>
            </ul>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero">
        <div class="hero-content">
            <!-- Disconnected State Hero -->
            <div id="heroDisconnected">
                <h1 class="hero-title">WalletWars</h1>
                <p class="hero-motto">Solana's ultimate winrate battleground</p>
                <div class="cta-buttons">
                    <a href="#" class="btn-hero-primary" onclick="openWalletModal()">Connect Wallet</a>
                    <a href="#learn-more" class="btn-secondary">Learn More</a>
                </div>
            </div>

            <!-- Connected State Hero -->
            <div id="heroConnected" style="display: none;">
                <h1 class="hero-title">WalletWars</h1>
                <p class="hero-motto">Solana's ultimate winrate battleground</p>
                
                <div class="champion-welcome-simple">
                    <p class="welcome-champion">Welcome, <span class="champion-name-highlight" id="heroChampionNameText">Champion</span></p>
                </div>
                
                <div class="cta-buttons">
                    <a href="#learn-more" class="btn-secondary">Learn More</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Learn More Section -->
    <div id="learn-more" class="learn-more-section">
        <div class="learn-more-container">
            <h2 class="learn-more-title">How WalletWars Works</h2>
            
            <div class="learn-more-content">
                <div class="concept-card">
                    <div class="concept-icon">⚔️</div>
                    <h3 class="concept-title">Skill-Based Competition</h3>
                    <p class="concept-description">
                        Compete based on your wallet's performance and trading skills, not luck. Your winrate determines your rank in tournaments.
                    </p>
                </div>
                
                <div class="concept-card">
                    <div class="concept-icon">🏆</div>
                    <h3 class="concept-title">Real SOL Rewards</h3>
                    <p class="concept-description">
                        Win real SOL prizes in tournaments. Top performers take home the largest share of the prize pool based on their wallet performance.
                    </p>
                </div>
                
                <div class="concept-card">
                    <div class="concept-icon">📊</div>
                    <h3 class="concept-title">Performance Tracking</h3>
                    <p class="concept-description">
                        Advanced analytics track your wallet's value changes over time, calculating your performance percentage for tournament rankings.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Wallet Connection Modal -->
    <div class="wallet-modal" id="walletModal">
        <div class="wallet-modal-content">
            <div class="modal-header">
                <button class="modal-close" onclick="closeWalletModal()">×</button>
                <div class="modal-title" id="modalTitle">Connect Wallet</div>
                <div class="modal-subtitle" id="modalSubtitle">Choose your preferred Solana wallet to get started</div>
            </div>

            <!-- Step Indicators -->
            <div class="step-indicators">
                <div class="step-indicator active" id="step1Indicator">1</div>
                <div class="step-indicator" id="step2Indicator">2</div>
                <div class="step-indicator" id="step3Indicator">3</div>
                <div class="step-indicator" id="step4Indicator">4</div>
            </div>

            <!-- Step 1: Wallet Selection -->
            <div class="step-content active" id="step1Content">
                <div class="security-info">
                    <div class="security-title">🔒 Security First</div>
                    <div class="security-text">
                        WalletWars will never ask for your private keys or seed phrases. We only need permission to view your wallet's public address and transaction history for tournament scoring.
                    </div>
                </div>

                <div class="wallet-options">
                    <div class="wallet-option" onclick="selectWallet('phantom')">
                        <div class="wallet-icon">👻</div>
                        <div class="wallet-info">
                            <div class="wallet-name">Phantom</div>
                            <div class="wallet-description">Most popular Solana wallet</div>
                            <div class="wallet-status" id="phantomStatus">✓ Checking...</div>
                        </div>
                    </div>

                    <div class="wallet-option" onclick="selectWallet('solflare')">
                        <div class="wallet-icon">☀️</div>
                        <div class="wallet-info">
                            <div class="wallet-name">Solflare</div>
                            <div class="wallet-description">Secure and feature-rich</div>
                            <div class="wallet-status" id="solflareStatus">✓ Checking...</div>
                        </div>
                    </div>

                    <div class="wallet-option" onclick="selectWallet('backpack')">
                        <div class="wallet-icon">🎒</div>
                        <div class="wallet-info">
                            <div class="wallet-name">Backpack</div>
                            <div class="wallet-description">Modern crypto wallet</div>
                            <div class="wallet-status" id="backpackStatus">✓ Checking...</div>
                        </div>
                    </div>

                    <div class="wallet-option" onclick="selectWallet('torus')">
                        <div class="wallet-icon">🌀</div>
                        <div class="wallet-info">
                            <div class="wallet-name">Torus</div>
                            <div class="wallet-description">Social login wallet</div>
                            <div class="wallet-status" id="torusStatus">📱 Mobile Support</div>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn-modal-secondary" onclick="closeWalletModal()">Cancel</button>
                </div>
            </div>

            <!-- Step 2: Connecting -->
            <div class="step-content" id="step2Content">
                <div style="text-align: center; padding: 2rem;">
                    <div class="loading-spinner"></div>
                    <div style="font-size: 1.2rem; color: #8b5cf6; margin-bottom: 1rem;">Connecting to <span id="selectedWalletName">Phantom</span>...</div>
                    <div style="color: #9ca3af;">Please approve the connection in your wallet</div>
                </div>
            </div>

            <!-- Step 3: Champion Creation -->
            <div class="step-content" id="step3Content">
                <div class="education-section">
                    <div class="education-title">⚠️ Important: Tournament Wallet Recommendation</div>
                    <div class="education-content">
                        <strong>We strongly recommend using a dedicated tournament wallet!</strong>
                        <ul class="education-list">
                            <li>Create a separate wallet just for WalletWars competitions</li>
                            <li>Transfer a small amount (0.1-1 SOL) to start competing</li>
                            <li>This protects your main holdings and ensures fair competition</li>
                            <li>External funding during tournaments = automatic disqualification</li>
                        </ul>
                    </div>
                </div>

                <div class="champion-creator">
                    <div class="form-group">
                        <label class="form-label">Champion Name</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="championName" 
                            placeholder="Enter your champion name..."
                            maxlength="20"
                            oninput="updateChampionPreview()"
                        >
                        <div style="color: #9ca3af; font-size: 0.75rem; margin-top: 0.25rem;">
                            3-20 characters, family-friendly content only
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Choose Your Avatar</label>
                        <div class="avatar-grid" id="avatarGrid">
                            <div class="avatar-option" onclick="selectAvatar('🔥')" data-avatar="🔥">🔥</div>
                            <div class="avatar-option" onclick="selectAvatar('⚔️')" data-avatar="⚔️">⚔️</div>
                            <div class="avatar-option" onclick="selectAvatar('⚡')" data-avatar="⚡">⚡</div>
                            <div class="avatar-option" onclick="selectAvatar('🐋')" data-avatar="🐋">🐋</div>
                            <div class="avatar-option" onclick="selectAvatar('☀️')" data-avatar="☀️">☀️</div>
                            <div class="avatar-option" onclick="selectAvatar('🎯')" data-avatar="🎯">🎯</div>
                            <div class="avatar-option" onclick="selectAvatar('🌌')" data-avatar="🌌">🌌</div>
                            <div class="avatar-option" onclick="selectAvatar('🎮')" data-avatar="🎮">🎮</div>
                        </div>
                    </div>

                    <div class="champion-preview">
                        <div class="preview-avatar" id="previewAvatar">🔥</div>
                        <div class="preview-name" id="previewName">Champion Name</div>
                        <div class="preview-subtitle">Ready to dominate the leaderboards</div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn-modal-secondary" onclick="goToStep(1)">Back</button>
                    <button class="btn-modal-primary" id="createChampionBtn" onclick="goToStep(4)" disabled>Create Champion</button>
                </div>
            </div>

            <!-- Step 4: Education & Agreement -->
            <div class="step-content" id="step4Content">
                <div class="education-section">
                    <div class="education-title">📊 How Performance Tracking Works</div>
                    <div class="education-content">
                        We track your wallet's total value (SOL + tokens) over tournament periods to calculate your performance percentage. 
                        Higher performance = higher tournament ranking and bigger prize shares.
                    </div>
                </div>

                <div class="education-section">
                    <div class="education-title">🚫 Anti-Cheating Measures</div>
                    <div class="education-content">
                        <ul class="education-list">
                            <li><strong>No external funding:</strong> Adding SOL/tokens during tournaments = disqualification</li>
                            <li><strong>Fair competition:</strong> Only your trading skill determines your rank</li>
                            <li><strong>Transparent tracking:</strong> All transactions are monitored on-chain</li>
                            <li><strong>Equal opportunity:</strong> Everyone starts with the same rules</li>
                        </ul>
                    </div>
                </div>

                <div class="education-section">
                    <div class="education-title">🔒 Privacy Protection</div>
                    <div class="education-content">
                        Your wallet address is kept completely private and will <strong>never be displayed publicly</strong> on the site. 
                        Only your champion name and avatar are visible to other players. This protects you from potential griefing 
                        attacks or unwanted attention while maintaining full transparency for tournament scoring.
                    </div>
                </div>

                <div class="agreement-section">
                    <div class="checkbox-wrapper">
                        <div class="checkbox-custom" id="agreementCheckbox" onclick="toggleAgreement()"></div>
                        <label class="checkbox-label" onclick="toggleAgreement()">
                            I understand and agree to the fair play rules. I will not fund my tournament wallet externally during competitions. 
                            I acknowledge that cheating will result in immediate disqualification and potential account suspension. I understand 
                            that my wallet address will remain private and never be displayed publicly on the platform.
                        </label>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn-modal-secondary" onclick="goToStep(3)">Back</button>
                    <button class="btn-modal-primary" id="finalizeBtn" onclick="finalizeChamption()" disabled>Join WalletWars</button>
                </div>
            </div>

            <!-- Step 5: Success -->
            <div class="step-content" id="step5Content">
                <div class="success-celebration">
                    <div class="success-icon">🏆</div>
                    <div class="success-title">Welcome to WalletWars!</div>
                    <div class="success-message">Your champion profile has been created successfully</div>
                    
                    <div class="achievement-unlock">
                        <div class="achievement-icon">🎯</div>
                        <div class="achievement-text">Achievement Unlocked: Tournament Debut Ready!</div>
                    </div>

                    <div class="modal-actions">
                        <button class="btn-modal-primary" onclick="completedOnboarding()">Start Competing!</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let isConnected = false;
        let currentStep = 1;
        let selectedWallet = null;
        let selectedAvatar = '🔥';
        let walletConnection = null;
        let championData = {
            name: '',
            avatar: '🔥',
            wallet: '',
            walletType: ''
        };

        // Mobile Navigation Functions
        function initializeMobileNavigation() {
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            const hamburger = document.querySelector('.hamburger');
            
            if (!mobileToggle || !navLinks || !hamburger) return;
            
            mobileToggle.addEventListener('click', function() {
                const isOpen = navLinks.classList.contains('active');
                if (isOpen) {
                    closeMobileMenu();
                } else {
                    openMobileMenu();
                }
            });
            
            const navLinksItems = navLinks.querySelectorAll('a');
            navLinksItems.forEach(link => {
                link.addEventListener('click', function() {
                    closeMobileMenu();
                });
            });
            
            document.addEventListener('click', function(event) {
                const isClickInsideNav = navLinks.contains(event.target) || 
                                        mobileToggle.contains(event.target);
                if (!isClickInsideNav && navLinks.classList.contains('active')) {
                    closeMobileMenu();
                }
            });
        }

        function openMobileMenu() {
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            const hamburger = document.querySelector('.hamburger');
            
            navLinks.classList.add('active');
            hamburger.classList.add('active');
            mobileToggle.setAttribute('aria-expanded', 'true');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            const hamburger = document.querySelector('.hamburger');
            
            navLinks.classList.remove('active');
            hamburger.classList.remove('active');
            mobileToggle.setAttribute('aria-expanded', 'false');
            document.body.style.overflow = '';
        }

        function handleWindowResize() {
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    closeMobileMenu();
                }
            });
        }

        // Wallet connection functions
        function openWalletModal() {
            document.getElementById('walletModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            resetModalToStep1();
            
            // Check wallet availability when modal opens
            setTimeout(checkWalletAvailability, 100);
        }

        function checkWalletAvailability() {
            // Check Phantom
            if (window.solana && window.solana.isPhantom) {
                document.getElementById('phantomStatus').textContent = '✓ Connected';
                document.getElementById('phantomStatus').style.color = '#10b981';
            } else if (isMobileDevice()) {
                document.getElementById('phantomStatus').textContent = '📱 Open in Phantom';
                document.getElementById('phantomStatus').style.color = '#8b5cf6';
            } else {
                document.getElementById('phantomStatus').textContent = '⚠️ Install Extension';
                document.getElementById('phantomStatus').style.color = '#f59e0b';
            }

            // Check Solflare
            if (window.solflare) {
                document.getElementById('solflareStatus').textContent = '✓ Connected';
                document.getElementById('solflareStatus').style.color = '#10b981';
            } else if (isMobileDevice()) {
                document.getElementById('solflareStatus').textContent = '📱 Open in Solflare';
                document.getElementById('solflareStatus').style.color = '#8b5cf6';
            } else {
                document.getElementById('solflareStatus').textContent = '⚠️ Install Extension';
                document.getElementById('solflareStatus').style.color = '#f59e0b';
            }

            // Check Backpack
            if (window.backpack) {
                document.getElementById('backpackStatus').textContent = '✓ Connected';
                document.getElementById('backpackStatus').style.color = '#10b981';
            } else if (isMobileDevice()) {
                document.getElementById('backpackStatus').textContent = '📱 Open in Backpack';
                document.getElementById('backpackStatus').style.color = '#8b5cf6';
            } else {
                document.getElementById('backpackStatus').textContent = '⚠️ Install Extension';
                document.getElementById('backpackStatus').style.color = '#f59e0b';
            }
        }

        function closeWalletModal() {
            document.getElementById('walletModal').classList.remove('active');
            document.body.style.overflow = '';
            
            // Only reset if not connected
            if (!isConnected) {
                resetModalToStep1();
            }
        }

        function resetModalToStep1() {
            currentStep = 1;
            goToStep(1);
            updateStepIndicators();
            updateModalHeader('Connect Wallet', 'Choose your preferred Solana wallet to get started');
        }

        async function selectWallet(walletType) {
            selectedWallet = walletType;
            championData.walletType = walletType;
            
            goToStep(2);
            
            const walletNames = {
                'phantom': 'Phantom',
                'solflare': 'Solflare', 
                'backpack': 'Backpack',
                'torus': 'Torus'
            };
            
            document.getElementById('selectedWalletName').textContent = walletNames[walletType];
            
            try {
                await connectToWallet(walletType);
            } catch (error) {
                console.error('Wallet connection failed:', error);
                showConnectionError(error.message);
            }
        }

        async function connectToWallet(walletType) {
            return new Promise((resolve, reject) => {
                // Mobile wallet connection logic
                if (isMobileDevice()) {
                    handleMobileWalletConnection(walletType, resolve, reject);
                    return;
                }

                // Desktop - try real wallet connection
                let wallet = null;
                
                switch(walletType) {
                    case 'phantom':
                        if (window.solana && window.solana.isPhantom) {
                            wallet = window.solana;
                        }
                        break;
                    case 'solflare':
                        if (window.solflare && window.solflare.isSolflare) {
                            wallet = window.solflare;
                        }
                        break;
                    case 'backpack':
                        if (window.backpack) {
                            wallet = window.backpack;
                        }
                        break;
                    case 'torus':
                        if (window.torus) {
                            wallet = window.torus;
                        }
                        break;
                }

                if (!wallet) {
                    // Wallet not installed - show install instructions
                    showWalletNotFound(walletType);
                    reject(new Error('Wallet not found'));
                    return;
                }

                // Attempt to connect
                wallet.connect()
                    .then(() => {
                        if (wallet.publicKey) {
                            championData.wallet = wallet.publicKey.toString();
                            walletConnection = wallet;
                            
                            // Success - move to champion creation
                            setTimeout(() => {
                                goToStep(3);
                                updateModalHeader('Create Your Champion', 'Customize your WalletWars identity');
                                resolve();
                            }, 1000);
                        } else {
                            reject(new Error('Failed to get wallet address'));
                        }
                    })
                    .catch((error) => {
                        if (error.message?.includes('User rejected')) {
                            showConnectionRejected();
                        } else {
                            showConnectionError('Failed to connect to wallet');
                        }
                        reject(error);
                    });
            });
        }

        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        function handleMobileWalletConnection(walletType, resolve, reject) {
            // Check if we're in a wallet's in-app browser
            if (window.solana && window.solana.isPhantom) {
                // We're in Phantom's in-app browser
                connectToPhantomMobile(resolve, reject);
                return;
            }

            if (window.solflare) {
                // We're in Solflare's in-app browser
                connectToSolflareMobile(resolve, reject);
                return;
            }

            // Not in wallet browser - need to redirect to wallet app
            showMobileWalletInstructions(walletType, resolve, reject);
        }

        function connectToPhantomMobile(resolve, reject) {
            window.solana.connect()
                .then(() => {
                    if (window.solana.publicKey) {
                        championData.wallet = window.solana.publicKey.toString();
                        walletConnection = window.solana;
                        
                        setTimeout(() => {
                            goToStep(3);
                            updateModalHeader('Create Your Champion', 'Customize your WalletWars identity');
                            resolve();
                        }, 1000);
                    } else {
                        reject(new Error('Failed to get wallet address'));
                    }
                })
                .catch((error) => {
                    showConnectionError('Failed to connect to Phantom wallet');
                    reject(error);
                });
        }

        function connectToSolflareMobile(resolve, reject) {
            window.solflare.connect()
                .then(() => {
                    if (window.solflare.publicKey) {
                        championData.wallet = window.solflare.publicKey.toString();
                        walletConnection = window.solflare;
                        
                        setTimeout(() => {
                            goToStep(3);
                            updateModalHeader('Create Your Champion', 'Customize your WalletWars identity');
                            resolve();
                        }, 1000);
                    } else {
                        reject(new Error('Failed to get wallet address'));
                    }
                })
                .catch((error) => {
                    showConnectionError('Failed to connect to Solflare wallet');
                    reject(error);
                });
        }

        function showMobileWalletInstructions(walletType, resolve, reject) {
            const content = document.getElementById('step2Content');
            
            const walletInfo = {
                'phantom': {
                    name: 'Phantom',
                    deepLink: `https://phantom.app/ul/browse/${encodeURIComponent(window.location.href)}?ref=https://phantom.app`,
                    appStore: 'https://apps.apple.com/app/phantom-solana-wallet/id1598432977',
                    playStore: 'https://play.google.com/store/apps/details?id=app.phantom'
                },
                'solflare': {
                    name: 'Solflare',
                    deepLink: `https://solflare.com/access-wallet?url=${encodeURIComponent(window.location.href)}`,
                    appStore: 'https://apps.apple.com/app/solflare/id1580902717',
                    playStore: 'https://play.google.com/store/apps/details?id=com.solflare.mobile'
                },
                'backpack': {
                    name: 'Backpack',
                    deepLink: `https://backpack.app/browse/${encodeURIComponent(window.location.href)}`,
                    appStore: 'https://apps.apple.com/app/backpack-crypto-wallet/id1615273120',
                    playStore: 'https://play.google.com/store/apps/details?id=app.backpack.mobile'
                }
            };

            const wallet = walletInfo[walletType];
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            
            content.innerHTML = `
                <div style="text-align: center; padding: 1.5rem;">
                    <div style="font-size: 2.5rem; margin-bottom: 1rem;">📱</div>
                    <div style="font-size: 1.2rem; color: #8b5cf6; margin-bottom: 1rem; font-weight: 600;">
                        Connect ${wallet.name} Mobile
                    </div>
                    <div style="color: #d1d5db; margin-bottom: 2rem; line-height: 1.5;">
                        To connect your ${wallet.name} wallet on mobile, you need to open this page in the ${wallet.name} app's browser.
                    </div>
                    
                    <div style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2); border-radius: 0.75rem; padding: 1rem; margin-bottom: 1.5rem;">
                        <div style="color: #8b5cf6; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.9rem;">
                            📋 Step-by-Step Instructions:
                        </div>
                        <div style="color: #d1d5db; font-size: 0.85rem; text-align: left; line-height: 1.4;">
                            1. Tap "Open ${wallet.name}" below<br>
                            2. This will switch to your ${wallet.name} app<br>
                            3. In ${wallet.name}, tap "Browser" or "DApps"<br>
                            4. Navigate back to WalletWars<br>
                            5. Try connecting again
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1rem;">
                        <a href="${wallet.deepLink}" class="btn-modal-primary" style="text-decoration: none; text-align: center;">
                            📱 Open ${wallet.name}
                        </a>
                        
                        ${!window.solana && !window.solflare ? `
                        <div style="font-size: 0.8rem; color: #9ca3af; margin: 0.5rem 0;">
                            Don't have ${wallet.name}? Download it:
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            ${isIOS ? `<a href="${wallet.appStore}" target="_blank" class="btn-modal-secondary" style="flex: 1; text-decoration: none; text-align: center; font-size: 0.8rem;">App Store</a>` : ''}
                            ${isAndroid ? `<a href="${wallet.playStore}" target="_blank" class="btn-modal-secondary" style="flex: 1; text-decoration: none; text-align: center; font-size: 0.8rem;">Play Store</a>` : ''}
                        </div>
                        ` : ''}
                    </div>
                    
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn-modal-secondary" onclick="goToStep(1)" style="flex: 1;">
                            Try Different Wallet
                        </button>
                        <button class="btn-modal-secondary" onclick="selectWallet('${walletType}')" style="flex: 1;">
                            I'm in ${wallet.name} Browser
                        </button>
                    </div>
                </div>
            `;
        }

        function generateFakeWalletAddress() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz123456789';
            let result = '';
            for (let i = 0; i < 44; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function showWalletNotFound(walletType) {
            const content = document.getElementById('step2Content');
            const walletNames = {
                'phantom': 'Phantom',
                'solflare': 'Solflare', 
                'backpack': 'Backpack',
                'torus': 'Torus'
            };
            
            const walletUrls = {
                'phantom': 'https://phantom.app/',
                'solflare': 'https://solflare.com/',
                'backpack': 'https://backpack.app/',
                'torus': 'https://tor.us/'
            };
            
            content.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">⚠️</div>
                    <div style="font-size: 1.2rem; color: #ef4444; margin-bottom: 1rem;">
                        ${walletNames[walletType]} Not Found
                    </div>
                    <div style="color: #9ca3af; margin-bottom: 2rem;">
                        Please install ${walletNames[walletType]} wallet to continue
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <a href="${walletUrls[walletType]}" target="_blank" class="btn-modal-primary">
                            Install ${walletNames[walletType]}
                        </a>
                        <button class="btn-modal-secondary" onclick="goToStep(1)">
                            Try Another Wallet
                        </button>
                    </div>
                </div>
            `;
        }

        function showConnectionRejected() {
            const content = document.getElementById('step2Content');
            content.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">❌</div>
                    <div style="font-size: 1.2rem; color: #ef4444; margin-bottom: 1rem;">
                        Connection Rejected
                    </div>
                    <div style="color: #9ca3af; margin-bottom: 2rem;">
                        You need to approve the wallet connection to continue
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button class="btn-modal-primary" onclick="selectWallet('${selectedWallet}')">
                            Try Again
                        </button>
                        <button class="btn-modal-secondary" onclick="goToStep(1)">
                            Choose Different Wallet
                        </button>
                    </div>
                </div>
            `;
        }

        function showConnectionError(message) {
            const content = document.getElementById('step2Content');
            content.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">🔌</div>
                    <div style="font-size: 1.2rem; color: #ef4444; margin-bottom: 1rem;">
                        Connection Failed
                    </div>
                    <div style="color: #9ca3af; margin-bottom: 2rem;">
                        ${message}
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button class="btn-modal-primary" onclick="selectWallet('${selectedWallet}')">
                            Try Again
                        </button>
                        <button class="btn-modal-secondary" onclick="goToStep(1)">
                            Choose Different Wallet
                        </button>
                    </div>
                </div>
            `;
        }

        function displayWalletInfo() {
            if (championData.wallet) {
                const shortAddress = championData.wallet.slice(0, 4) + '...' + championData.wallet.slice(-4);
                
                // Add wallet info to champion creation step
                const championCreator = document.querySelector('.champion-creator');
                
                // Remove existing wallet info if present
                const existingInfo = document.getElementById('walletInfo');
                if (existingInfo) {
                    existingInfo.remove();
                }
                
                const walletInfo = document.createElement('div');
                walletInfo.id = 'walletInfo';
                walletInfo.style.cssText = `
                    background: rgba(16, 185, 129, 0.1);
                    border: 1px solid rgba(16, 185, 129, 0.2);
                    border-radius: 0.75rem;
                    padding: 1rem;
                    margin-bottom: 1rem;
                    text-align: center;
                `;
                walletInfo.innerHTML = `
                    <div style="color: #10b981; font-weight: 600; margin-bottom: 0.5rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        ✅ Wallet Connected
                    </div>
                    <div style="color: #d1d5db; font-size: 0.9rem; font-family: monospace;">
                        ${shortAddress}
                    </div>
                    <div style="color: #9ca3af; font-size: 0.8rem; margin-top: 0.25rem;">
                        This champion will be linked to your wallet
                    </div>
                `;
                
                championCreator.insertBefore(walletInfo, championCreator.firstChild);
            }
        }

        function selectAvatar(emoji) {
            selectedAvatar = emoji;
            championData.avatar = emoji;
            
            // Update UI
            document.querySelectorAll('.avatar-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-avatar="${emoji}"]`).classList.add('selected');
            
            updateChampionPreview();
            updateCreateChampionBtn();
        }

        // Moderation system
        const profanityList = [
            // Common profanity
            'fuck', 'shit', 'damn', 'bitch', 'ass', 'asshole', 'bastard', 'crap', 'piss',
            'dick', 'cock', 'pussy', 'tits', 'boobs', 'sex', 'porn', 'nude', 'naked',
            'slut', 'whore', 'faggot', 'nigger', 'nigga', 'retard', 'gay', 'lesbian',
            'homo', 'tranny', 'chink', 'spic', 'kike', 'wetback', 'gook', 'raghead',
            // Crypto scam terms
            'elon', 'musk', 'tesla', 'bitcoin', 'eth', 'bnb', 'doge', 'shib', 'moon',
            'lambo', 'hodl', 'diamond', 'hands', 'ape', 'pump', 'dump', 'rugpull',
            'scam', 'ponzi', 'pyramid', 'mlm', 'doubler', 'giveaway', 'airdrop',
            // Inappropriate gaming terms
            'nazi', 'hitler', 'stalin', 'isis', 'terrorist', 'bomb', 'kill', 'murder',
            'rape', 'molest', 'pedophile', 'child', 'minor', 'underage', 'suicide',
            // Common substitutions
            'fck', 'fuk', 'f*ck', 'sh1t', 'b1tch', 'a55', 'd1ck', 'p0rn', 'n1gger',
            's3x', 'fag', 'h0m0', 'lesb1an', 'gay', 'tr4nny', 'n4zi', 'h1tler'
        ];

        function moderateChampionName(name) {
            const cleanName = name.toLowerCase().trim();
            
            // Check length
            if (cleanName.length < 3) {
                return { isValid: false, error: 'Champion name must be at least 3 characters long' };
            }
            
            if (cleanName.length > 20) {
                return { isValid: false, error: 'Champion name must be 20 characters or less' };
            }
            
            // Check for only spaces or special characters
            if (!/[a-zA-Z0-9]/.test(cleanName)) {
                return { isValid: false, error: 'Champion name must contain at least one letter or number' };
            }
            
            // Check for excessive special characters
            const specialCharCount = (cleanName.match(/[^a-zA-Z0-9\s]/g) || []).length;
            if (specialCharCount > cleanName.length * 0.3) {
                return { isValid: false, error: 'Too many special characters in name' };
            }
            
            // Profanity check - exact matches
            for (const word of profanityList) {
                if (cleanName.includes(word)) {
                    return { isValid: false, error: 'Champion name contains inappropriate content' };
                }
            }
            
            // Check for leetspeak and common substitutions
            const normalizedName = cleanName
                .replace(/0/g, 'o')
                .replace(/1/g, 'i')
                .replace(/3/g, 'e')
                .replace(/4/g, 'a')
                .replace(/5/g, 's')
                .replace(/7/g, 't')
                .replace(/8/g, 'b')
                .replace(/\*/g, '')
                .replace(/@/g, 'a')
                .replace(/\$/g, 's');
            
            for (const word of profanityList) {
                if (normalizedName.includes(word)) {
                    return { isValid: false, error: 'Champion name contains inappropriate content' };
                }
            }
            
            // Check for repeated characters (spam pattern)
            if (/(.)\1{4,}/.test(cleanName)) {
                return { isValid: false, error: 'Champion name cannot have more than 4 repeated characters' };
            }
            
            // Check for suspicious patterns
            const suspiciousPatterns = [
                /admin/i, /mod/i, /owner/i, /dev/i, /official/i, /staff/i,
                /support/i, /help/i, /system/i, /null/i, /undefined/i,
                /test/i, /bot/i, /fake/i, /spam/i
            ];
            
            for (const pattern of suspiciousPatterns) {
                if (pattern.test(cleanName)) {
                    return { isValid: false, error: 'Champion name cannot impersonate staff or use reserved terms' };
                }
            }
            
            return { isValid: true, error: null };
        }

        function updateChampionPreview() {
            const nameInput = document.getElementById('championName');
            const name = nameInput.value || 'Champion Name';
            const errorDisplay = document.getElementById('nameError');
            
            // Clear previous error styling
            nameInput.style.borderColor = '';
            if (errorDisplay) {
                errorDisplay.remove();
            }
            
            // Only validate if user has typed something
            if (nameInput.value.trim()) {
                const moderation = moderateChampionName(nameInput.value);
                
                if (!moderation.isValid) {
                    // Show error
                    nameInput.style.borderColor = '#ef4444';
                    
                    const errorElement = document.createElement('div');
                    errorElement.id = 'nameError';
                    errorElement.style.cssText = `
                        color: #ef4444;
                        font-size: 0.8rem;
                        margin-top: 0.5rem;
                        padding: 0.5rem;
                        background: rgba(239, 68, 68, 0.1);
                        border: 1px solid rgba(239, 68, 68, 0.2);
                        border-radius: 0.5rem;
                        display: flex;
                        align-items: center;
                        gap: 0.5rem;
                    `;
                    errorElement.innerHTML = `⚠️ ${moderation.error}`;
                    
                    nameInput.parentNode.appendChild(errorElement);
                    championData.name = '';
                } else {
                    // Valid name
                    nameInput.style.borderColor = '#10b981';
                    championData.name = nameInput.value.trim();
                }
            } else {
                championData.name = '';
            }
            
            document.getElementById('previewName').textContent = championData.name || 'Champion Name';
            document.getElementById('previewAvatar').textContent = selectedAvatar;
            
            updateCreateChampionBtn();
        }

        function updateCreateChampionBtn() {
            const nameInput = document.getElementById('championName').value.trim();
            const btn = document.getElementById('createChampionBtn');
            
            // Check if name passes moderation
            const moderation = moderateChampionName(nameInput);
            
            if (moderation.isValid && selectedAvatar) {
                btn.disabled = false;
            } else {
                btn.disabled = true;
            }
        }

        function toggleAgreement() {
            const checkbox = document.getElementById('agreementCheckbox');
            const finalizeBtn = document.getElementById('finalizeBtn');
            
            checkbox.classList.toggle('checked');
            finalizeBtn.disabled = !checkbox.classList.contains('checked');
        }

        function goToStep(stepNumber) {
            // Hide all step content
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show target step
            document.getElementById(`step${stepNumber}Content`).classList.add('active');
            
            currentStep = stepNumber;
            updateStepIndicators();
            
            // Update headers based on step
            if (stepNumber === 2) {
                updateModalHeader('Connecting...', 'Establishing secure connection');
            } else if (stepNumber === 3) {
                updateModalHeader('Create Your Champion', 'Customize your WalletWars identity');
                // Show wallet connection info in champion creation
                displayWalletInfo();
            } else if (stepNumber === 4) {
                updateModalHeader('Fair Play Agreement', 'Important rules and guidelines');
            } else if (stepNumber === 5) {
                updateModalHeader('Success!', 'Welcome to the WalletWars community');
            }
        }

        function updateStepIndicators() {
            for (let i = 1; i <= 4; i++) {
                const indicator = document.getElementById(`step${i}Indicator`);
                indicator.classList.remove('active', 'completed');
                
                if (i < currentStep) {
                    indicator.classList.add('completed');
                    indicator.textContent = '✓';
                } else if (i === currentStep) {
                    indicator.classList.add('active');
                    indicator.textContent = i;
                } else {
                    indicator.textContent = i;
                }
            }
        }

        function updateModalHeader(title, subtitle) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalSubtitle').textContent = subtitle;
        }

        function finalizeChamption() {
            goToStep(5);
            
            // Save champion data securely
            const walletHash = championStorage.save(championData);
            championData.wallet_hash = walletHash;
            
            console.log('Champion created and saved:', {
                name: championData.name,
                avatar: championData.avatar,
                wallet_hash: walletHash
            });
        }

        function completedOnboarding() {
            isConnected = true;
            
            // Update UI to connected state
            updateUIToConnectedState();
            
            // Close modal
            closeWalletModal();
            
            // Show celebration message
            setTimeout(() => {
                alert(`🎉 Welcome ${championData.name}!\n\nYour champion profile has been created and saved securely!\n\n✅ Champion linked to wallet\n✅ Data encrypted and stored\n✅ Ready for tournaments\n\nGood luck in the competitions! 🚀`);
            }, 500);
        }

        // Enhanced data management functions
        function loadSavedChampion() {
            const saved = championStorage.load();
            if (saved && saved.name && saved.avatar) {
                // Restore champion data
                championData = {
                    name: saved.name,
                    avatar: saved.avatar,
                    wallet: '', // Don't store raw wallet in memory
                    walletType: saved.walletType || '',
                    wallet_hash: saved.wallet_hash
                };
                
                isConnected = true;
                updateUIToConnectedState();
                
                console.log('Champion restored from secure storage:', {
                    name: saved.name,
                    avatar: saved.avatar,
                    created: saved.created_at
                });
            }
        }

        function saveChampionData() {
            if (isConnected && championData.name && championData.wallet) {
                championStorage.save(championData);
            }
        }

        function disconnectWallet() {
            if (confirm('Are you sure you want to disconnect your wallet?\n\nThis will delete your champion data permanently!')) {
                // Disconnect from actual wallet if connected
                if (walletConnection && walletConnection.disconnect) {
                    try {
                        walletConnection.disconnect();
                    } catch (error) {
                        console.log('Wallet disconnect error:', error);
                    }
                }
                
                isConnected = false;
                walletConnection = null;
                
                // Clear all stored data
                championStorage.clear();
                
                // Reset UI to disconnected state
                document.getElementById('connectWalletBtn').style.display = 'block';
                document.getElementById('championInfo').style.display = 'none';
                document.getElementById('heroDisconnected').style.display = 'block';
                document.getElementById('heroConnected').style.display = 'none';
                
                // Reset champion data
                championData = {
                    name: '',
                    avatar: '🔥',
                    wallet: '',
                    walletType: ''
                };
                
                alert('Champion data deleted and wallet disconnected successfully.');
            }
        }

        // Debug function to check storage (for development)
        function checkChampionStorage() {
            const stats = championStorage.getStats();
            const saved = championStorage.load();
            
            console.log('=== WalletWars Storage Debug ===');
            console.log('Storage Stats:', stats);
            console.log('Saved Champion:', saved);
            console.log('Current Champion:', championData);
            console.log('Connected:', isConnected);
            
            if (saved) {
                console.log('Champion was created:', saved.created_at);
                console.log('Wallet hash:', saved.wallet_hash);
            }
        }

        function updateUIToConnectedState() {
            // Hide connect button, show champion info
            document.getElementById('connectWalletBtn').style.display = 'none';
            document.getElementById('championInfo').style.display = 'flex';
            
            // Update champion info in nav
            document.getElementById('navChampionAvatar').textContent = championData.avatar;
            document.getElementById('navChampionName').textContent = championData.name;
            
            // Switch hero sections
            document.getElementById('heroDisconnected').style.display = 'none';
            document.getElementById('heroConnected').style.display = 'block';
            
            // Update hero champion name
            document.getElementById('heroChampionNameText').textContent = championData.name;
        }

        // Champion Storage System (Client-side with basic security)
        const championStorage = {
            // Create a basic hash of wallet address
            createWalletHash: function(walletAddress) {
                // Simple but effective hashing for client-side
                let hash = 0;
                const saltedAddress = walletAddress + 'walletwars_salt_2024';
                for (let i = 0; i < saltedAddress.length; i++) {
                    const char = saltedAddress.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // Convert to 32-bit integer
                }
                return Math.abs(hash).toString(36);
            },

            // Basic encoding for champion name
            encodeName: function(name) {
                return btoa(unescape(encodeURIComponent(name)));
            },

            // Basic decoding for champion name
            decodeName: function(encodedName) {
                try {
                    return decodeURIComponent(escape(atob(encodedName)));
                } catch (e) {
                    return 'Champion'; // Fallback
                }
            },

            // Save champion data securely
            save: function(championData) {
                const secureData = {
                    wallet_hash: this.createWalletHash(championData.wallet),
                    name_encoded: this.encodeName(championData.name),
                    avatar: championData.avatar,
                    wallet_type: championData.walletType,
                    created_at: new Date().toISOString(),
                    version: '1.0'
                };

                // Save to localStorage
                localStorage.setItem('walletWars_champion', JSON.stringify(secureData));
                
                // Also save a backup with timestamp for recovery
                const backupKey = `walletWars_backup_${Date.now()}`;
                localStorage.setItem(backupKey, JSON.stringify(secureData));
                
                // Clean old backups (keep only last 3)
                this.cleanOldBackups();
                
                console.log('Champion data saved securely');
                return secureData.wallet_hash;
            },

            // Load champion data
            load: function() {
                try {
                    const saved = localStorage.getItem('walletWars_champion');
                    if (saved) {
                        const data = JSON.parse(saved);
                        return {
                            wallet_hash: data.wallet_hash,
                            name: this.decodeName(data.name_encoded),
                            avatar: data.avatar,
                            walletType: data.wallet_type,
                            created_at: data.created_at,
                            version: data.version
                        };
                    }
                } catch (e) {
                    console.error('Error loading champion data:', e);
                }
                return null;
            },

            // Check if wallet already has a champion
            hasChampion: function(walletAddress) {
                const saved = this.load();
                if (saved) {
                    const currentHash = this.createWalletHash(walletAddress);
                    return saved.wallet_hash === currentHash;
                }
                return false;
            },

            // Delete champion data
            clear: function() {
                localStorage.removeItem('walletWars_champion');
                // Also clear backups
                const keys = Object.keys(localStorage);
                keys.forEach(key => {
                    if (key.startsWith('walletWars_backup_')) {
                        localStorage.removeItem(key);
                    }
                });
                console.log('Champion data cleared');
            },

            // Clean old backup files
            cleanOldBackups: function() {
                const keys = Object.keys(localStorage);
                const backupKeys = keys
                    .filter(key => key.startsWith('walletWars_backup_'))
                    .sort()
                    .reverse(); // Most recent first

                // Keep only the 3 most recent backups
                if (backupKeys.length > 3) {
                    const toDelete = backupKeys.slice(3);
                    toDelete.forEach(key => localStorage.removeItem(key));
                }
            },

            // Get storage statistics
            getStats: function() {
                const keys = Object.keys(localStorage);
                const wwKeys = keys.filter(key => key.startsWith('walletWars'));
                const totalSize = wwKeys.reduce((size, key) => {
                    return size + localStorage.getItem(key).length;
                }, 0);

                return {
                    totalKeys: wwKeys.length,
                    totalSize: totalSize,
                    sizeKB: Math.round(totalSize / 1024 * 100) / 100
                };
            }
        };

        // Auto-save when champion data changes
        window.addEventListener('beforeunload', saveChampionData);

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('walletModal');
            if (event.target === modal) {
                closeWalletModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeWalletModal();
            }
            
            // Add keyboard shortcut for storage debug (Ctrl+Shift+D)
            if (event.ctrlKey && event.shiftKey && event.key === 'D') {
                checkChampionStorage();
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize mobile navigation
            initializeMobileNavigation();
            handleWindowResize();
            
            // Load saved champion data
            loadSavedChampion();
            
            // Set default avatar as selected
            document.querySelector('[data-avatar="🔥"]').classList.add('selected');
            
            // Smooth scroll for learn more
            const learnMoreLink = document.querySelector('a[href="#learn-more"]');
            if (learnMoreLink) {
                learnMoreLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById('learn-more').scrollIntoView({ 
                        behavior: 'smooth' 
                    });
                });
            }
        });
    </script>
</body>
</html>
